--ALTER SESSION SET CURRENT_SCHEMA = "ANONYMOUS";

BEGIN

DELETE FROM "ANONYMOUS"."Polygons" WHERE "POL_Id" >= 1000;
DELETE FROM "ANONYMOUS"."Ellipses" WHERE "ELL_Id" >= 1000;
DELETE FROM "ANONYMOUS"."Curved" WHERE "CUR_Id" >= 1000;
DELETE FROM "ANONYMOUS"."Shapes" WHERE "SHA_Id" >= 1000;

EXECUTE IMMEDIATE 'ALTER TABLE "ANONYMOUS"."Addresses" DROP CONSTRAINT "FK_Addresses_Customers"';
EXECUTE IMMEDIATE 'ALTER TABLE "ANONYMOUS"."Invoices" DROP CONSTRAINT "FK_Invoices_Customers"';
EXECUTE IMMEDIATE 'ALTER TABLE "ANONYMOUS"."Customers" DROP CONSTRAINT "PK_Customers"';
EXECUTE IMMEDIATE 'ALTER TABLE "ANONYMOUS"."Polygons" DROP CONSTRAINT "FK_Polygons_Shapes"';
EXECUTE IMMEDIATE 'ALTER TABLE "ANONYMOUS"."Curved" DROP CONSTRAINT "FK_Curved_Shapes"';

EXECUTE IMMEDIATE 'ALTER TABLE "ANONYMOUS"."Customers" DROP COLUMN "CUS_Id"';
EXECUTE IMMEDIATE 'ALTER TABLE "ANONYMOUS"."Users" DROP COLUMN "USR_Id"';
EXECUTE IMMEDIATE 'ALTER TABLE "ANONYMOUS"."Shapes" DROP COLUMN "SHA_Id"';

EXECUTE IMMEDIATE 'ALTER TRIGGER "ANONYMOUS"."Customers_Trg" DISABLE';
EXECUTE IMMEDIATE 'ALTER TRIGGER "ANONYMOUS"."Users_Trg" DISABLE';
EXECUTE IMMEDIATE 'ALTER TRIGGER "ANONYMOUS"."Shapes_Trg" DISABLE';

EXECUTE IMMEDIATE 'ALTER TABLE "ANONYMOUS"."Customers" ADD ("CUS_Id" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE NOT NULL)';
EXECUTE IMMEDIATE 'ALTER TABLE "ANONYMOUS"."Customers" ADD CONSTRAINT "PK_Customers" PRIMARY KEY ("CUS_Id")';

EXECUTE IMMEDIATE 'ALTER TABLE "ANONYMOUS"."Users" ADD ("USR_Id" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE NOT NULL)';
EXECUTE IMMEDIATE 'ALTER TABLE "ANONYMOUS"."Users" ADD CONSTRAINT "PK_Users" PRIMARY KEY ("USR_Id")';

EXECUTE IMMEDIATE 'ALTER TABLE "ANONYMOUS"."Shapes" ADD ("SHA_Id" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE NOT NULL)';
EXECUTE IMMEDIATE 'ALTER TABLE "ANONYMOUS"."Shapes" ADD CONSTRAINT "PK_Shapes" PRIMARY KEY ("SHA_Id")';

EXECUTE IMMEDIATE 'ALTER TABLE "ANONYMOUS"."Addresses" ADD CONSTRAINT "FK_Addresses_Customers" FOREIGN KEY ("CUS_Id") REFERENCES "ANONYMOUS"."Customers" ("CUS_Id")';
EXECUTE IMMEDIATE 'ALTER TABLE "ANONYMOUS"."Invoices" ADD CONSTRAINT "FK_Invoices_Customers" FOREIGN KEY ("CUS_Id") REFERENCES "ANONYMOUS"."Customers" ("CUS_Id")';
EXECUTE IMMEDIATE 'ALTER TABLE "ANONYMOUS"."Polygons" ADD CONSTRAINT "FK_Polygons_Shapes" FOREIGN KEY ("POL_Id") REFERENCES "ANONYMOUS"."Shapes" ("SHA_Id")';
EXECUTE IMMEDIATE 'ALTER TABLE "ANONYMOUS"."Curved" ADD CONSTRAINT "FK_Curved_Shapes" FOREIGN KEY ("CUR_Id") REFERENCES "ANONYMOUS"."Shapes" ("SHA_Id")';

END;
